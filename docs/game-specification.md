# インクリメンタルファンタジー ゲーム仕様書

## 1. ゲームの概要

プレイヤーがクリックでゴールドを獲得し、仲間や施設を購入・アップグレードして自動ゴールド生産量を増やしていくPC・スマホ対応のインクリメンタルゲーム。生成AIを活用してコンテンツを動的に生成し、シンプルで直感的なUIで短期間でプレイ可能。

## 2. ゲームの詳細仕様

### 2.1 ゲームループ

#### クリック獲得システム
- 基本クリック値: 1ゴールド/クリック
- クリック力アップグレードにより倍率増加
- クリック時のフィードバック（数値表示、エフェクト）

#### 自動獲得システム
- 100ms間隔でのタイマー処理による自動ゴールド生成
- 仲間・施設ごとの個別生産量計算
- 毎秒生産量の表示とリアルタイム更新

#### アップグレード機能
- 線形コスト増加（基本コスト × 1.15^レベル）
- レベルアップによる生産量増加
- アップグレード可能状態の視覚的表示

### 2.2 データ構造

#### プレイヤー状態
```typescript
interface PlayerState {
  gold: number;
  clickPower: number;
  goldPerSecond: number;
  totalGoldEarned: number;
  playtime: number;
}
```

#### 仲間・施設データ
```typescript
interface GameEntity {
  id: string;
  name: string;
  description: string;
  level: number;
  baseCost: number;
  baseProduction: number;
  unlockCondition: UnlockCondition;
  isUnlocked: boolean;
  category: 'companion' | 'facility';
}
```

#### 解放条件
```typescript
interface UnlockCondition {
  type: 'gold' | 'entity_level' | 'total_earned';
  threshold: number;
  entityId?: string;
}
```

### 2.3 UI構成

#### ヘッダー部分
- 現在所持ゴールド表示（数値フォーマット）
- 毎秒生産量表示
- プレイ時間表示

#### メインエリア
- 大きなクリックボタン（中央配置）
- クリック時の数値フィードバック
- 背景エフェクト

#### サイドパネル
- 仲間・施設の購入/アップグレードリスト
- カテゴリタブ（仲間・施設）
- スクロール可能なアイテムリスト

#### フッター
- ログ・イベント表示領域
- システムメッセージ表示

## 3. AI活用ポイント

### 3.1 コンテンツ生成例

#### 仲間の自動生成
```
名前: 「勇敢な剣士リオン」
説明: 「古い剣を振り回しながらコインを集める若き戦士。経験を積むたびに剣技が上達する。」
生産量: レベル × 0.5ゴールド/秒
```

#### 施設の自動生成
```
名前: 「魔法の鍛冶場」
説明: 「神秘的な炎で武器を作り続ける工房。より多くの冒険者が武器を求めてやってくる。」
生産量: レベル × 2.0ゴールド/秒
```

#### イベント文章生成
```
「村に新しい冒険者がやってきました！彼らはあなたの施設に興味を示しているようです。」
「謎の商人が珍しいアイテムを持参しました。しばらくの間、生産量が1.5倍になります！」
```

### 3.2 生成タイミング
- ゲーム開始時の初期コンテンツ生成
- 特定の進行度でのコンテンツ追加
- プレイヤーのリクエストによる新規生成

## 4. 技術的な実装の指針

### 4.1 フロントエンド構成
- **フレームワーク**: Vite + React + TypeScript
- **状態管理**: React Hooks（useState, useEffect, useContext）
- **スタイリング**: CSS Modules または Styled-components
- **データ永続化**: LocalStorage

### 4.2 ファイル構成
```
src/
├── components/          # React コンポーネント
│   ├── Header.tsx
│   ├── ClickButton.tsx
│   ├── EntityList.tsx
│   └── LogPanel.tsx
├── hooks/              # カスタムフック
│   ├── useGameState.ts
│   ├── useAutoGold.ts
│   └── useLocalStorage.ts
├── types/              # TypeScript 型定義
│   └── game.ts
├── utils/              # ユーティリティ関数
│   ├── calculations.ts
│   ├── formatting.ts
│   └── ai-generation.ts
└── data/               # ゲームデータ
    └── initial-entities.ts
```

### 4.3 パフォーマンス配慮
- React.memo による不要な再レンダリング防止
- useCallback, useMemo によるメモ化
- 大きな数値の効率的な処理
- タイマー処理の適切な管理（cleanup）

### 4.4 レスポンシブ対応
- モバイルファーストデザイン
- タッチ操作に適したボタンサイズ
- 画面サイズに応じたレイアウト調整
- 横画面・縦画面両対応

## 5. 今後の拡張アイデア

### 5.1 ゲームプレイ拡張
- **プレステージシステム**: 進行度リセットによる永続的ボーナス
- **実績・成果システム**: 特定条件達成によるボーナス解放
- **イベントシステム**: 時間限定ボーナスやチャレンジ
- **複数マップ機能**: 進行度に応じた新エリア解放

### 5.2 AI機能拡張
- **動的バランス調整**: プレイヤーの進行度に応じた難易度調整
- **パーソナライゼーション**: プレイスタイルに応じたコンテンツ提案
- **ストーリー生成**: 進行度に応じた物語展開
- **ビジュアル生成**: AIによるキャラクター・アイテム画像生成

### 5.3 技術的拡張
- **クラウド保存**: 複数デバイス間でのデータ同期
- **マルチプレイヤー**: 友達との協力・競争機能
- **PWA対応**: オフライン動作とアプリ化
- **データ分析**: プレイヤー行動の分析とゲーム改善

### 5.4 マネタイゼーション
- **広告視聴ボーナス**: 任意広告による一時的ブースト
- **アイテム課金**: ゲーム進行を加速する有料アイテム
- **プレミアム機能**: 高度な機能へのサブスクリプション
- **コスメティック**: 見た目変更アイテムの販売

## 開発優先度

### フェーズ1（MVP）
1. 基本的なクリックゲーム機能
2. 簡単な仲間・施設システム
3. LocalStorage による保存
4. 基本的なレスポンシブUI

### フェーズ2（機能拡張）
1. AI コンテンツ生成機能
2. より多くの仲間・施設
3. アップグレードシステム強化
4. イベント・ログシステム

### フェーズ3（体験向上）
1. 視覚エフェクト強化
2. サウンド機能
3. 実績システム
4. より高度なAI活用